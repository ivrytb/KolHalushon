<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>专 砖注专 </title>
    <style>
        body { margin: 0; font-family: sans-serif; display: flex; height: 100vh; background: #f0f2f5; }
        .sidebar { width: 300px; background: white; border-left: 1px solid #ddd; padding: 15px; overflow-y: auto; }
        .lesson-item { padding: 12px; margin-bottom: 8px; background: #fff; cursor: pointer; border-radius: 8px; border: 1px solid #eee; transition: 0.2s; }
        .lesson-item:hover { background: #f0f7ff; border-color: #007bff; }
        .lesson-item b { display: block; color: #d93025; margin-bottom: 4px; }
        .main-content { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .clipper {
            width: 850px; height: 480px; overflow: hidden; position: relative;
            border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); background: #000;
        }
        iframe {
            width: 1250px; height: 1500px; position: absolute;
            top: -110px; right: -200px; border: none;
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h2 style="font-size: 1.2rem;">砖专  注砖</h2>
    <div id="live-list">注 砖专...</div>
</div>

<div class="main-content">
    <div class="clipper">
        <iframe id="player" src="" scrolling="no"></iframe>
    </div>
    <h3 id="current-title">专 砖注专 专砖</h3>
</div>

<script>
    const PROXY_URL = '/api/proxy?url=';
    const KHL_API = 'https://www.kolhalashon.com/api/LiveShiurim/WebSite_LiveShiurimGetShiurim';

    async function loadLiveShiurim() {
        try {
            // 驻 -Proxy 砖 砖 转 转 拽 砖
            const response = await fetch(PROXY_URL + encodeURIComponent(KHL_API));
            const data = await response.json();
            
            const list = document.getElementById('live-list');
            list.innerHTML = ''; // 拽 注转 注

            data.forEach(shiur => {
                const item = document.createElement('div');
                item.className = 'lesson-item';
                //  驻砖 转 -ShiurId  FileId 拽 砖专
                const id = shiur.ShiurId || shiur.FileId;
                
                item.innerHTML = `<b> 砖专 </b> ${shiur.Title || '砖注专  转专转'}<br><small>${shiur.RavName || ''}</small>`;
                item.onclick = () => play(id, shiur.Title);
                list.appendChild(item);
            });
        } catch (e) {
            document.getElementById('live-list').innerText = '砖 注转 砖专';
        }
    }

    function play(id, title) {
        document.getElementById('player').src = `https://www.kolhalashon.com/he/regularSite/playShiur/${id}/-1/0/false`;
        document.getElementById('current-title').innerText = title;
    }

    // 驻注 专砖转
    loadLiveShiurim();
</script>

</body>
</html>
