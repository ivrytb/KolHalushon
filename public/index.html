<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Y24 Turbo Downloader</title>
    <style>
        body { font-family: system-ui, sans-serif; background: #121212; color: white; text-align: center; padding-top: 50px; }
        .card { background: #1e1e1e; padding: 30px; border-radius: 15px; display: inline-block; width: 350px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        input { width: 100%; padding: 12px; margin: 20px 0; border-radius: 8px; border: 1px solid #333; background: #252525; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #27ae60; color: white; border: none; cursor: pointer; border-radius: 8px; font-weight: bold; }
        button:disabled { background: #444; }
        #status { margin-top: 20px; color: #f1c40f; font-size: 14px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>专 注拽驻转 驻专</h2>
        <input type="text" id="urlInput" placeholder="拽 拽 ">
        <button id="dlBtn" onclick="runDownload()"> 专 MP3</button>
        <div id="status"></div>
    </div>

    <script>
        async function runDownload() {
            const url = document.getElementById('urlInput').value;
            const status = document.getElementById('status');
            const btn = document.getElementById('dlBtn');

            if(!url) return alert("  拽");

            btn.disabled = true;
            status.innerText = "转爪注转 专 专 ... (驻专  专 MP3)";

            try {
                const response = await fetch('/api/download', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url: url })
                });

                if (!response.ok) throw new Error("专 住 注  住");

                //  拽抓 专 拽  专 砖 驻驻
                const blob = await response.blob();
                
                //   砖 转 专 -MP3 转 砖 砖
                const mp3File = new Blob([blob], { type: 'audio/mpeg' });
                const downloadUrl = window.URL.createObjectURL(mp3File);
                
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.download = "y24_audio.mp3"; // 砖 砖专 转  -MP3 转拽 专
                document.body.appendChild(a);
                a.click();
                
                window.URL.revokeObjectURL(downloadUrl);
                status.innerText = "砖! 拽抓 砖专 -MP3.";
            } catch (e) {
                status.innerHTML = "<span style='color:red'>砖: " + e.message + "</span><br>住 砖 转 转专 拽 驻专.";
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
